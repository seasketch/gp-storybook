import{r as l}from"./index-RYns6xqu.js";import{I as $,R as A,g as O,a as G}from"./context-D1gH75Th.js";const J=(...e)=>{console!=null&&console.warn&&(g(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e))},F={},T=(...e)=>{g(e[0])&&F[e[0]]||(g(e[0])&&(F[e[0]]=new Date),J(...e))},k=(e,n)=>()=>{if(e.isInitialized)n();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),n()};e.on("initialized",s)}},M=(e,n,s)=>{e.loadNamespaces(n,k(e,s))},j=(e,n,s,i)=>{g(s)&&(s=[s]),s.forEach(m=>{e.options.ns.indexOf(m)<0&&e.options.ns.push(m)}),e.loadLanguages(n,k(e,i))},U=(e,n,s={})=>!n.languages||!n.languages.length?(T("i18n.languages were undefined or empty",n.languages),!0):n.hasLoadedNamespace(e,{lng:s.lng,precheck:(i,m)=>{var t;if(((t=s.bindI18n)==null?void 0:t.indexOf("languageChanging"))>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!m(i.isLanguageChangingTo,e))return!1}}),g=e=>typeof e=="string",W=e=>typeof e=="object"&&e!==null,Y=(e,n)=>{const s=l.useRef();return l.useEffect(()=>{s.current=e},[e,n]),s.current},v=(e,n,s,i)=>e.getFixedT(n,s,i),q=(e,n,s,i)=>l.useCallback(v(e,n,s,i),[e,n,s,i]),K=(e,n={})=>{var z,E,I,L;const{i18n:s}=n,{i18n:i,defaultNS:m}=l.useContext($)||{},t=s||i||G();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new A),!t){T("You will need to pass in an i18next instance by using initReactI18next");const a=(c,u)=>g(u)?u:W(u)&&g(u.defaultValue)?u.defaultValue:Array.isArray(c)?c[c.length-1]:c,r=[a,{},!1];return r.t=a,r.i18n={},r.ready=!1,r}(z=t.options.react)!=null&&z.wait&&T("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const y={...O(),...t.options.react,...n},{useSuspense:S,keyPrefix:x}=y;let o=m||((E=t.options)==null?void 0:E.defaultNS);o=g(o)?[o]:o||["translation"],(L=(I=t.reportNamespaces).addUsedNamespaces)==null||L.call(I,o);const f=(t.isInitialized||t.initializedStoreOnce)&&o.every(a=>U(a,t,y)),P=q(t,n.lng||null,y.nsMode==="fallback"?o:o[0],x),b=()=>P,p=()=>v(t,n.lng||null,y.nsMode==="fallback"?o:o[0],x),[C,N]=l.useState(b);let h=o.join();n.lng&&(h=`${n.lng}${h}`);const R=Y(h),d=l.useRef(!0);l.useEffect(()=>{const{bindI18n:a,bindI18nStore:r}=y;d.current=!0,!f&&!S&&(n.lng?j(t,n.lng,o,()=>{d.current&&N(p)}):M(t,o,()=>{d.current&&N(p)})),f&&R&&R!==h&&d.current&&N(p);const c=()=>{d.current&&N(p)};return a&&(t==null||t.on(a,c)),r&&(t==null||t.store.on(r,c)),()=>{d.current=!1,t&&(a==null||a.split(" ").forEach(u=>t.off(u,c))),r&&t&&r.split(" ").forEach(u=>t.store.off(u,c))}},[t,h]),l.useEffect(()=>{d.current&&f&&N(b)},[t,x,f]);const w=[C,t,f];if(w.t=C,w.i18n=t,w.ready=f,f||!f&&!S)return w;throw new Promise(a=>{n.lng?j(t,n.lng,o,()=>a()):M(t,o,()=>a())})};export{K as u};
